var X=(y,f)=>()=>(f||y((f={exports:{}}).exports,f),f.exports);var Y=X((ee,P)=>{(async()=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();const y="/topcodes-wasm-rs/assets/topcodes_wasm_bg-dab611e8.wasm",f=async(e={},t)=>{let r;if(t.startsWith("data:")){const n=t.replace(/^data:.*?base64,/,"");let o;if(typeof Buffer=="function"&&typeof Buffer.from=="function")o=Buffer.from(n,"base64");else if(typeof atob=="function"){const s=atob(n);o=new Uint8Array(s.length);for(let c=0;c<s.length;c++)o[c]=s.charCodeAt(c)}else throw new Error("Cannot decode base64-encoded data URL");r=await WebAssembly.instantiate(o,e)}else{const n=await fetch(t),o=n.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&o.startsWith("application/wasm"))r=await WebAssembly.instantiateStreaming(n,e);else{const s=await n.arrayBuffer();r=await WebAssembly.instantiate(s,e)}}return r.instance.exports},a=new Array(32).fill(void 0);a.push(void 0,null,!0,!1);function u(e){return a[e]}let l=a.length;function U(e){e<36||(a[e]=l,l=e)}function A(e){const t=u(e);return U(e),t}const W=typeof TextDecoder>"u"?(0,P.require)("util").TextDecoder:TextDecoder;let v=new W("utf-8",{ignoreBOM:!0,fatal:!0});v.decode();let w=new Uint8Array;function C(){return w.byteLength===0&&(w=new Uint8Array(J.buffer)),w}function S(e,t){return v.decode(C().subarray(e,e+t))}let d=32;function M(e){if(d==1)throw new Error("out of js stack");return a[--d]=e,d}function O(e,t,r){try{const n=K(M(e),t,r);return A(n)}finally{a[d++]=void 0}}function h(e){l===a.length&&a.push(a.length+1);const t=l;return l=a[t],a[t]=e,t}function k(e,t){try{return e.apply(this,t)}catch(r){z(h(r))}}function q(e){A(e)}function j(){const e=new Array;return h(e)}function N(e,t){return u(e).push(u(t))}function R(e,t){return u(e)[t>>>0]}function F(){return k(function(e,t){const r=JSON.parse(S(e,t));return h(r)},arguments)}function $(e,t){throw new Error(S(e,t))}URL=globalThis.URL;const b=await f({"./topcodes_wasm_bg.js":{__wbindgen_object_drop_ref:q,__wbg_new_1d9a920c6bfc44a8:j,__wbg_push_740e4b286702d964:N,__wbg_getindex_41df5a66b406660d:R,__wbg_parse_e23be3fecd886e2a:F,__wbindgen_throw:$}},y),J=b.memory,K=b.scan,z=b.__wbindgen_exn_store,p=[],m=640,g=480;let T=Date.now(),B=0;const _=document.querySelector("video"),G=document.getElementById("annotation-canvas"),i=G.getContext("2d"),x=document.getElementById("video-canvas"),D=x.getContext("2d"),H=document.getElementById("statistics"),V={audio:!1,video:!0,width:m,height:g};function Q(e){_.srcObject=e,_.play()}async function L(){const e=D.getImageData(0,0,m,g).data;T=Date.now();const t=await new Promise(r=>{r(O(e,m,g))});B=Date.now()-T,p.splice(0,p.length,...t),setTimeout(()=>L(),0)}L();function E(){i.clearRect(0,0,m,g),i.textAlign="center",i.textBaseline="middle",H.innerText=`Scan time: ${B}ms`;for(const e of p){const{x:t,y:r,unit:n,orientation:o,code:s}=e,c=n*4;i.beginPath(),i.fillStyle="#ff000055",i.arc(t,r,c,0,Math.PI*2),i.fill(),i.beginPath(),i.lineWidth=c/10,i.strokeStyle="#0077ff88",i.moveTo(t,r),i.lineTo(t+c*Math.cos(o),r+c*Math.sin(o)),i.stroke(),i.font=`${c/2}px Calibri`,i.fillStyle="#fff",i.fillText(s.toString(),t,r)}requestAnimationFrame(E)}function I(){D.drawImage(_,0,0,x.width,x.height),requestAnimationFrame(I)}E(),I(),navigator.mediaDevices.getUserMedia(V).then(Q)})()});export default Y();
